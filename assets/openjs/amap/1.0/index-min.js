/*! caja-kissy  */
KISSY.add("openjs/amap/1.0/index",function(t,e){function n(n){function o(){this.obj=new AMap.Pixel(arguments[0],arguments[1]),this.getX=function(){return this.obj.getX()},this.getY=function(){return this.obj.getY()},this.equals=function(t){return this.obj.equals(new AMap.Pixel(t.getX(),t.getY()))},this.toString=function(){return""+this.obj}}function i(){this.obj=new AMap.Size(arguments[0],arguments[1]),this.getWidth=function(){return this.obj.getWidth()},this.getHeight=function(){return this.obj.getHeight()},this.toString=function(){return""+this.obj}}function r(){this.obj=new AMap.LngLat(arguments[0],arguments[1]),this.getLng=function(){return this.obj.getLng()},this.equals=function(t){return this.obj.equals(new AMap.LngLat(t.getLng(),t.getLat()))},this.getLat=function(){return this.obj.getLat()},this.offset=function(){var t=this.obj.offset(arguments[0],arguments[1]);return new r(t.getLng(),t.getLat())},this.distance=function(t){return this.obj.distance(new AMap.LngLat(t.getLng(),t.getLat()))},this.toString=function(){return""+this.obj}}function a(){var t=arguments[0],e=arguments[1];this.obj=new AMap.Bounds(new AMap.LngLat(t.getLng(),t.getLat()),new AMap.LngLat(e.getLng(),e.getLat())),this.contains=function(t){return this.obj.contains(new AMap.LngLat(t.getLng(),t.getLat()))},this.getCenter=function(){var t=this.obj.getCenter();return new r(t.getLng(),t.getLat())},this.getSouthWest=function(){var t=this.obj.getSouthWest();return new r(t.getLng(),t.getLat())},this.getNorthEast=function(){var t=this.obj.getNorthEast();return new r(t.getLng(),t.getLat())},this.toString=function(){return""+this.obj}}function s(){var t=arguments[1]||{};t.center&&(t.center=new AMap.LngLat(t.center.getLng(),t.center.getLat())),this.obj=new AMap.Map(arguments[0],t)}function g(){var t=this,e=arguments[0],n={};e.size&&(n.size=new AMap.Size(e.size.getWidth(),e.size.getHeight())),e.imageOffset&&(n.imageOffset=new AMap.Pixel(e.imageOffset.getX(),e.imageOffset.getY())),e.image&&(n.image=cajaAFTB.rewriteURL(e.image,null,null,{XML_ATTR:"src"})),t.obj=new AMap.Icon(n)}function u(){var t=arguments[0];t.map&&(t.map=t.map.obj),t.position&&(t.position=new AMap.LngLat(t.position.getLng(),t.position.getLat())),t.offset&&(t.offset=new AMap.Pixel(t.offset.getX(),t.offset.getY())),t.icon&&(t.icon=t.icon.obj?t.icon.obj:cajaAFTB.rewriteURL(t.icon,null,null,{XML_ATTR:"src"})),t.content&&(t.content="string"==typeof t.content?caja.sanitizeHtml(t.content):t.content.obj),this.obj=new AMap.Marker(t)}function c(t){var e=t;e.content&&(e.content="string"==typeof e.content?cajaAFTB.sanitizeHtml(e.content):e.content.obj),e.size&&(e.size=new AMap.Size(e.size.getWidth(),e.size.getHeight())),e.offset&&(e.offset=new AMap.Pixel(e.offset.getX(),e.offset.getY())),e.position&&(e.position=new AMap.LngLat(e.position.getLng(),e.position.getLat())),this.obj=new AMap.InfoWindow(e)}function p(t){this.obj=new AMap.Geocoder(cajaAFTB.untame(t))}l="getX,getY,equals,toString".split(","),n.markCtor(o),t.each(l,function(t){n.grantMethod(o,t)}),l="getWidth,getHeight,toString".split(","),n.markCtor(i),t.each(l,function(t){n.grantMethod(i,t)}),l="getLng,equals,getLat,offset,distance,toString".split(","),n.markCtor(r),t.each(l,function(t){n.grantMethod(r,t)}),l="contains,getCenter,getSouthWest,getNorthEast,toString".split(","),n.markCtor(a),t.each(l,function(t){n.grantMethod(a,t)});var l="getCenter,setCenter,getZoom,setZoom,getSize,getBounds,getStatus,getResolution,getScale,getDefaultCursor,zoomIn,zoomOut,setZoomAndCenter,setBounds,setStatus,panTo,panBy,clearMap,destroy,pixelToLngLat,lnglatToPixel,clearInfoWindow,containTolnglat,lnglatTocontainer,setFitView,plugin".split(",");return n.markCtor(s),s.prototype.plugin=function(t,e){this.obj.plugin(t,e)},s.prototype.getCenter=function(){var t=this.obj.getCenter();return new r(t.getLng(),t.getLat())},s.prototype.setCenter=function(t){this.obj.setCenter(new AMap.LngLat(t.getLng(),t.getLat()))},s.prototype.getZoom=function(){return this.obj.getZoom()},s.prototype.setZoom=function(t){this.obj.setZoom(t)},s.prototype.getSize=function(){var t=this.obj.getSize();return new i(t.getWidth(),t.getHeight())},s.prototype.getBounds=function(){var t=this.obj.getBounds();return new a(t.getSouthWest(),t.getNorthEast())},s.prototype.getStatus=function(){return this.obj.getStatus()},s.prototype.getResolution=function(t){return t?this.obj.getResolution(new AMap.LngLat(t.getLng(),t.getLat())):this.obj.getResolution()},s.prototype.getScale=function(t){return this.obj.getScale(t)},s.prototype.getDefaultCursor=function(){return this.obj.getDefaultCursor()},s.prototype.zoomIn=function(){this.obj.zoomIn()},s.prototype.zoomOut=function(){this.obj.zoomOut()},s.prototype.setZoomAndCenter=function(t,e){this.obj.setZoomAndCenter(t,new AMap.LngLat(e.getLng(),e.getLat()))},s.prototype.setBounds=function(t){var e=t.getSouthWest(),n=t.getNorthEast();e=new AMap.LngLat(e.getLng(),e.getLat()),n=new AMap.LngLat(n.getLng(),n.getLat()),this.obj.setBounds(new AMap.Bounds(e,n))},s.prototype.setStatus=function(t){this.obj.setStatus(cajaAFTB.untame(t))},s.prototype.panTo=function(t){this.obj.panTo(new AMap.LngLat(t.getLng(),t.getLat()))},s.prototype.panBy=function(t,e){this.obj.panBy(t,e)},s.prototype.clearMap=function(){this.obj.clearMap()},s.prototype.destroy=function(){this.obj.destroy()},s.prototype.pixelToLngLat=function(t,e){var n=this.obj.pixelToLngLat(new AMap.Pixel(t.getX(),t.getY()),e);return new r(n.getLng(),n.getLat())},s.prototype.lnglatToPixel=function(t,e){var n=this.obj.lnglatToPixel(new AMap.LngLat(t.getLng(),t.getLat()),e);return new o(n.getX(),n.getY())},s.prototype.clearInfoWindow=function(){this.obj.clearInfoWindow()},s.prototype.containTolnglat=function(t,e){var n=this.obj.containTolnglat(new AMap.Pixel(t.getX(),t.getY()),e);return new r(n.getLng(),n.getLat())},s.prototype.lnglatTocontainer=function(t,e){var n=this.obj.lnglatTocontainer(new AMap.LngLat(t.getLng(),t.getLat()),e);return new o(n.getX(),n.getY())},s.prototype.setFitView=function(t){this.obj.setFitView(t)},t.each(l,function(t){n.grantMethod(s,t)}),n.markCtor(g),l="getPosition,setPosition,setzIndex,setIcon,getIcon,setDraggable,getDraggable,hide,show,setCursor,setContent,getContent,moveTo,stopMove,setMap,setRotation".split(","),n.markCtor(u),u.prototype.getPosition=function(){var t=this.obj.getPosition();return new r(t.getLng(),t.getLat())},u.prototype.setPosition=function(t){this.obj.setPosition(new AMap.LngLat(t.getLng(),t.getLat()))},u.prototype.setzIndex=function(t){this.obj.setzIndex(t)},u.prototype.setIcon=function(t){t.obj?this.obj.setIcon(t.obj):this.obj.setIcon(cajaAFTB.rewriteURL(t,null,null,{XML_ATTR:"src"}))},u.prototype.getIcon=function(){return this.obj.getIcon()},u.prototype.setDraggable=function(t){this.obj.setDraggable(t)},u.prototype.getDraggable=function(){return this.obj.getDraggable()},u.prototype.hide=function(){this.obj.hide()},u.prototype.show=function(){this.obj.show()},u.prototype.setCursor=function(t){this.obj.setCursor(t)},u.prototype.setContent=function(t){t="string"==typeof t?cajaAFTB.sanitizeHtml(t):t.obj,this.obj.setContent(t)},u.prototype.getContent=function(){return this.obj.getContent()},u.prototype.moveTo=function(t,e,n){this.obj.moveTo(new AMap.LngLat(t.getLng(),t.getLat()),e,n)},u.prototype.stopMove=function(){this.obj.stopMove()},u.prototype.setMap=function(t){this.obj.setMap(t.obj)},u.prototype.setRotation=function(t){this.obj.setRotation(t)},t.each(l,function(t){n.grantMethod(u,t)}),l="close,open,getIsOpen,setContent,getContent,setPosition,getPosition,setSize,getSize".split(","),n.markCtor(c),c.prototype.close=function(){this.obj.close()},c.prototype.open=function(t,e){this.obj.open(t.obj,new AMap.LngLat(e.getLng(),e.getLat()))},c.prototype.getIsOpen=function(){return this.obj.getIsOpen()},c.prototype.setContent=function(){return arguments[0]="string"==typeof arguments[0]?cajaAFTB.sanitizeHtml(arguments[0]):arguments[0].obj,this.obj.setContent(arguments[0])},c.prototype.getContent=function(){return this.obj.getContent()},c.prototype.setPosition=function(t){this.obj.setPosition(new AMap.LngLat(t.getLng(),t.getLat()))},c.prototype.getPosition=function(){var t=this.obj.getPosition();return t?new r(t.getLng(),t.getLat()):t},c.prototype.setSize=function(t){this.obj.setSize(new AMap.Size(t.getWidth(),t.getHeight()))},c.prototype.getSize=function(){var t=this.obj.getSize();return t?new i(t.getWidth(),t.getHeight()):t},t.each(l,function(t){n.grantMethod(c,t)}),l="getLocation,getAddress,setCity".split(","),n.markCtor(p),p.prototype.getLocation=function(t){return this.obj.getLocation(t)},p.prototype.getAddress=function(t){return this.obj.getAddress(new AMap.LngLat(t.getLng(),t.getLat()))},p.prototype.setCity=function(t){return this.obj.setCity(t)},t.each(l,function(t){n.grantMethod(p,t)}),function(t){var l={Size:n.tame(n.markFunction(function(t,e){return new i(t,e)})),Bounds:n.tame(n.markFunction(function(t,e){return new a(t,e)})),Map:n.tame(n.markFunction(function(n,o){return new s(e.get(n,t.mod),o)})),Pixel:n.tame(n.markFunction(function(t,e){return new o(t,e)})),Icon:n.tame(n.markFunction(function(t){return new g(t)})),Marker:n.tame(n.markFunction(function(t){return new u(t)})),InfoWindow:n.tame(n.markFunction(function(t){return new c(t)})),LngLat:n.tame(n.markFunction(function(t,e){return new r(t,e)})),event:n.tame({addListener:n.markFunction(function(){var t=arguments;AMap.event.addListener(t[0].obj,t[1],n.markFunction(function(e){var n=e;if(n.lnglat&&(n.lnglat=new r(e.lnglat.getLng(),e.lnglat.getLat())),n.pixel&&(n.pixel=new o(e.pixel.getX(),e.pixel.getY())),n.geocodes)for(var i=0;n.geocodes.length>i;i++){var a=n.geocodes[i].location;a&&(n.geocodes[i].location=new r(a.getLng(),a.getLat()))}if(n.regeocode){for(var i=0;n.regeocode.roads.length>i;i++){var s=n.regeocode.roads[i].location;s&&(n.regeocode.roads[i].location=new r(s.getLng(),s.getLat()))}for(var i=0;n.regeocode.crosses.length>i;i++){var g=n.regeocode.crosses[i].location;g&&(n.regeocode.crosses[i].location=new r(g.getLng(),g.getLat()))}for(var i=0;n.regeocode.pois.length>i;i++){var u=n.regeocode.pois[i].location;u&&(n.regeocode.pois[i].location=new r(u.getLng(),u.getLat()))}}t[2].call(this,n)}))})}),Geocoder:n.tame(n.markFunction(function(t){return new p(t)}))};return{AMap:n.tame(l)}}}return n},{requires:["dom"]});